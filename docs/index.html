<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Everyday ggplot2 extension 🫖</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Everyday ggplot2 extension 🫖</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">projects.qmd</span>
    </span>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Community</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Cookbook</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Impact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/evamaerey/everyday_ggplot2_extension" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-everyday-ggplot2-extension" id="toc-why-everyday-ggplot2-extension" class="nav-link active" data-scroll-target="#why-everyday-ggplot2-extension">Why <em>Everyday ggplot2 extension?</em></a>
  <ul class="collapse">
  <li><a href="#extension-for-mere-mortals-everyday-users" id="toc-extension-for-mere-mortals-everyday-users" class="nav-link" data-scroll-target="#extension-for-mere-mortals-everyday-users">Extension for mere mortals (everyday users)</a></li>
  <li><a href="#support-through-missteps-and-hurdles" id="toc-support-through-missteps-and-hurdles" class="nav-link" data-scroll-target="#support-through-missteps-and-hurdles">Support through missteps and hurdles</a></li>
  </ul></li>
  <li><a href="#how-do-i-know-theres-an-opportunity-for-extension" id="toc-how-do-i-know-theres-an-opportunity-for-extension" class="nav-link" data-scroll-target="#how-do-i-know-theres-an-opportunity-for-extension">How do I know there’s an opportunity for extension?</a></li>
  <li><a href="#a-new-easy-recipes-approach-to-creating-and-using-new-stats-taste-succeed-minimally-modify" id="toc-a-new-easy-recipes-approach-to-creating-and-using-new-stats-taste-succeed-minimally-modify" class="nav-link" data-scroll-target="#a-new-easy-recipes-approach-to-creating-and-using-new-stats-taste-succeed-minimally-modify">A new ‘easy recipes’ approach to creating and using new Stats: Taste, succeed, minimally modify</a>
  <ul class="collapse">
  <li><a href="#fine-print" id="toc-fine-print" class="nav-link" data-scroll-target="#fine-print">Fine print</a></li>
  </ul></li>
  <li><a href="#communities-of-practice" id="toc-communities-of-practice" class="nav-link" data-scroll-target="#communities-of-practice">Communities of practice</a>
  <ul class="collapse">
  <li><a href="#read-along-packages" id="toc-read-along-packages" class="nav-link" data-scroll-target="#read-along-packages">Read along packages</a></li>
  <li><a href="#by-subject-area-of-application" id="toc-by-subject-area-of-application" class="nav-link" data-scroll-target="#by-subject-area-of-application">By subject area of application</a>
  <ul class="collapse">
  <li><a href="#spatial" id="toc-spatial" class="nav-link" data-scroll-target="#spatial">Spatial</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a>
  <ul class="collapse">
  <li><a href="#more-resources" id="toc-more-resources" class="nav-link" data-scroll-target="#more-resources">More resources</a></li>
  </ul></li>
  <li><a href="#g.p." id="toc-g.p." class="nav-link" data-scroll-target="#g.p.">g.p.</a>
  <ul class="collapse">
  <li><a href="#contributors" id="toc-contributors" class="nav-link" data-scroll-target="#contributors">Contributors</a></li>
  <li><a href="#consulted" id="toc-consulted" class="nav-link" data-scroll-target="#consulted">Consulted</a></li>
  </ul></li>
  <li><a href="#proposal" id="toc-proposal" class="nav-link" data-scroll-target="#proposal">proposal</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/EvaMaeRey/everyday_ggplot2_extension/edit/main/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/EvaMaeRey/everyday_ggplot2_extension/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="why-everyday-ggplot2-extension" class="level1">
<h1>Why <em>Everyday ggplot2 extension?</em></h1>
<p><code>ggplot2</code> is notable in the data visualization space. Its elegance and flexibility as well as its track-record of being well-maintained makes it a attractive tool for researchers, business professionals, journalists, educators and the like.</p>
<p><code>ggplot2</code> lets users ‘write their plots into existence’. Users identify required plot components, name those elements, and ggplot2 produces the described plot. Code tends to be concise and intuitive, and it provides a faithful record of inputs and specification of a rendered plot.</p>
<p><em>Extending</em> ggplot2 is a powerful way to enhance productivity and make plot coding more fluid and enjoyable. Given this, it’s surprising just how limited some quite useful extension mechanism are — even among seasoned ggplot2 users. It has been warned, for example, ‘Extending <code>ggplot2</code> … is not for the faint-hearted’.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> This state of affairs is unfortunate, but we think this reality doesn’t need to persist with greater sustained and focused attention to educational resources for potential extenders.</p>
<p>‘everyday ggplot2 extension’ is born out of (2020-present). It’s goal is to provide education materials that will meet potential extenders where they and provide a community of support in extension endeavors. In short, this project seeks to support a new wave of extenders.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<section id="extension-for-mere-mortals-everyday-users" class="level2">
<h2 class="anchored" data-anchor-id="extension-for-mere-mortals-everyday-users">Extension for mere mortals (everyday users)</h2>
<p>‘Everyday’ is meant in the sense of <em>ordinary</em> – your ggplot2 extension doesn’t need to be flashy or complicated.</p>
<p>‘Everyday’ is also meant in the sense of <em>frequent</em>. Practicing ggplot2 extension will probably make you better at extension - you’ll be in a position to write that next handy extension once when you have more experience under your belt. We’ve got some bite-sized exercises for you to build your know-how.</p>
<p>Furthermore, we model how to use extension mechanisms on the day-to-day. I.e. on-the-fly and in script use. (For those who are eventually interested in packaging, the project seeks to support best practice in that area as well - workshop to come).</p>
</section>
<section id="support-through-missteps-and-hurdles" class="level2">
<h2 class="anchored" data-anchor-id="support-through-missteps-and-hurdles">Support through missteps and hurdles</h2>
<p>By now, if you happen to know the book ‘The Design of Everyday Things’, you may be thinking our title evokes that work. That’s correct. An aim is to design new avenues for bringing people into ggplot2 extension.</p>
<p>And it’s to be expected that we’ll make poorly designed ggplot2 extensions along the way. And this is fine since mistakes can sometimes be more instructive and memorable than doing things ‘the right way’ the first time round. It’s hard to imagine Norman’s book selling as well without the ill-conceived tea kettle gracing the cover. In fact the ‘Norman door’ is one whose design makes door-use difficult. Expecting mistakes is another reason to make ggplot2 extension a less out-of-the-ordinary experience; past extensions feel less precious and we can part ways with them if appropriate. A deprecated package or abandoned function may have been of great service in getting you to a place that’s more sensible.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="design_of_everyday_things.jpg" class="img-fluid figure-img" width="72"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="how-do-i-know-theres-an-opportunity-for-extension" class="level1">
<h1>How do I know there’s an opportunity for extension?</h1>
<p>The reason ggplot2 exists is explained by Hadley Wickham in an interview:</p>
<blockquote class="blockquote">
<p>And, you know, I’d get a dataset. And, <em>in my head I could very clearly kind of picture</em>, I want to put this on the x-axis. Let’s put this on the y-axis, draw a line, put some points here, break it up by this variable. And then, like, getting that vision out of my head, and into reality, it’s just really, really hard. Just, like, felt harder than it should be… Where I just felt like … [should just be able] to say <em>this is what I’m thinking, this is how I’m picturing this plot. Like you’re the computer ‘Go and do it’.</em> - <a href="https://www.trifacta.com/podcast/tidy-data-with-hadley-wickham/" class="uri">https://www.trifacta.com/podcast/tidy-data-with-hadley-wickham/</a></p>
</blockquote>
<p>Born out of this frustration and knowedge of Leland Wilkinson’s Grammar of Graphics, ggplot2 was built with its ‘logically decomposed bits’, which generally lets you fly through plot creation with ease. You can go from the plot you’ve already pictured in your head into reality simply by describing it.</p>
<p>After a good amount of time using ggplot2, you get used to this flying sensation. You’ve practiced and mastered the grammar. You are a composer of ‘graphical poems’ — how the 2010 introductory paper on ggplot2 describes the code for the plot compositions. You confidently speak plots into existence. Poetry slam!</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="jules_leotard.jpeg" class="img-fluid figure-img" width="110"></p>
<figcaption><em>The ‘daring young man on the flying trapeze’, Jules Leotard, who ‘flies through the air with the greatest of ease’</em></figcaption>
</figure>
</div>
</div>
</div>
<p>But then one day you may find yourself with a loss for graphical words within ggplot2. At some point ggplot2 will seem to <em>fail</em> to give you the fluid ggplot2 experience. One day you will find yourself saying, ’Why aren’t I flying?” This might be a moment to double-check your grammar prowess; or it might be a moment to turn to ggplot2 extension!</p>
<p>You may find what you need among existing extensions, checking the <a href="https://exts.ggplot2.tidyverse.org/gallery/">extensions gallery</a> and the <a href="https://github.com/erikgahner/awesome-ggplot2">Awesome <code>ggplot2</code></a> repository, you can’t find what you need to fly again, you might consider creating your own extension.</p>
<p>To summarize, here are some situations that indicate there might be a ggplot2 extension opportunity:</p>
<ul>
<li>I don’t feel like I’m flying; but usually I do</li>
<li>My brain hurts because of the plot I’m trying to build; but usually it’s happy or</li>
<li>‘getting that vision out of my head, and into reality, it’s just really, really hard… harder than it should be.’</li>
<li>my amygdala is activated when I think about making a certain plot</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<!-- > Pooh began to feel a little more comfortable, because when you are a Bear of Very Little Brain, and you Think of Things, you find sometimes that a Thing which seemed very Thingish inside you is quite different when it gets out into the open and has other people looking at it. - A.A. Milne The House at Pooh Corner (1928) ch. 6 -->
</section>
<section id="a-new-easy-recipes-approach-to-creating-and-using-new-stats-taste-succeed-minimally-modify" class="level1">
<h1>A new ‘easy recipes’ approach to creating and using new Stats: Taste, succeed, minimally modify</h1>
<p>layer extension recipes take the form:</p>
<ul>
<li><p>Step 0. Get the job done with ‘base’ ggplot2. It’s a good idea to clarify what needs to happen without getting into the extension architecture</p></li>
<li><p>Step 1. Write a computation function. Wrap the necessary computation into a function.</p></li>
<li><p>Step 2. Define a ggproto object. ggproto objects allow your extension to work together with base ggplot2 functions! You’ll use the computation function from step 1 to help define it.</p></li>
<li><p>Step 3. Write your geom/stat_* function! You’re ready to write your function. You will incorporate the ggproto from step 2.</p></li>
<li><p>Step 4. Test/Enjoy! Take your new geom for a spin! Check out group-wise computation behavior!</p></li>
<li><p>link to easy geom recipes: first taste</p></li>
<li><p>cookbook</p></li>
<li><p>{statexpress} package for concisely writing</p></li>
<li><p>in-script extension examples</p>
<ul>
<li></li>
<li></li>
</ul></li>
</ul>
<section id="fine-print" class="level2">
<h2 class="anchored" data-anchor-id="fine-print">Fine print</h2>
<p>The focus at present has been Stat extension, though we hope to emphasize other areas.</p>
<p>compute_group recipes and tutorial</p>
</section>
</section>
<section id="communities-of-practice" class="level1">
<h1>Communities of practice</h1>
<p>Communities of practice can help motivate and sustain productivity of projects.</p>
<ul>
<li><p><a href="https://github.com/teunbrand/ggplot-extension-club">ggplot2 extenders</a> has met since</p></li>
<li><p><a href="https://github.com/teunbrand/ggplot-extension-club/discussions">discussion</a> Extenders can share their good ideas which maybe they don’t have quite the skills or knowledge to execute on; or maybe they are just missing a comma! The <a href="https://stackoverflow.com/questions/tagged/ggproto">ggproto</a> tag on StackOverflow is similar but might be dominated by more advanced users.)</p></li>
<li><p>stalwarts; long-time ggplot2 extenders and developers</p></li>
</ul>
<p>‘everyday ggplot2 extension’ would like to point you to new communities of practice – places were you can share work and frustrations in the ggplot2 world:</p>
<ul>
<li>warming up; [<a href="https://github.com/teunbrand/ggplot-extension-club" class="uri">https://github.com/teunbrand/ggplot-extension-club</a>]</li>
</ul>
<p>I’m hopeful that an ‘absolute newcomers’ group may develop; this could consist of ggplot2 super-users, no extension experience <a href="https://github.com/EvaMaeRey/easy-geom-recipes">tutorial evaluation is underway and focus group may seed absolute newcomers group</a> and their collaborators (is it cool and fun to explore the ggplot2 extension space w/ absolute newcomers <em>to ggplot2 and R</em> - yes it is!). It might spin off of the focus groups for the ‘easy geom recipes’ evaluation.</p>
<p>‘everyday ggplot2 extension’ promotes the ‘warming up’ group and aspires to serve an ‘absolute newcomers’ group; and to promote cross pollination between groups.</p>
<ul>
<li><a href="https://github.com/EvaMaeRey/ggpuzzles">ggpuzzles</a> is a place to demo minimal not-yet-working examples. Extenders can share their good ideas which maybe they don’t have quite the skills or knowledge to execute on; or maybe they are just missing a comma! The <a href="https://stackoverflow.com/questions/tagged/ggproto">ggproto</a> tag on StackOverflow is similar but might be dominated by more advanced users.</li>
</ul>
<section id="read-along-packages" class="level2">
<h2 class="anchored" data-anchor-id="read-along-packages">Read along packages</h2>
<ul>
<li><p>ggcalendar</p></li>
<li><p>gg</p></li>
</ul>
</section>
<section id="by-subject-area-of-application" class="level2">
<h2 class="anchored" data-anchor-id="by-subject-area-of-application">By subject area of application</h2>
<ul>
<li><p>stats101verse</p>
<ul>
<li>[ggxmean]</li>
<li>[ggols]</li>
<li>[ggsample]</li>
<li>[ma206data]</li>
<li>[ma206distributions]</li>
<li>[ma206equations]</li>
</ul></li>
</ul>
<!-- https://www.newyorker.com/books/page-turner/the-allure-of-the-map#:~:text=Stevenson%20writes%2C%20in%20an%20essay,predestined%2C%20I%20ticketed%20my%20performance%20'-->
<section id="spatial" class="level3">
<h3 class="anchored" data-anchor-id="spatial">Spatial</h3>
<p><a href="https://ivelasq.rbind.io/blog/leaidr2/" class="uri">https://ivelasq.rbind.io/blog/leaidr2/</a> school district maps</p>
<blockquote class="blockquote">
<p>I am told there are people that don’t care for maps, and I find it hard to believe. - Robert Louis Stevenson</p>
</blockquote>
<ul>
<li><p>[ggamericas] is an experiment in the geomSf-inheritance space, seeking to foster cross-package synergies, lessons learned, and emergence of best practices. The following packages are in the works and are proposed as early guides in this space:</p>
<ul>
<li><p><a href="https://github.com/EvaMaeRey/ggfips">ggfips</a></p></li>
<li><p><a href="">ggnorthcarolina</a></p></li>
<li><p><a href="https://github.com/EvaMaeRey/ggbrazil">ggbrazil</a></p></li>
<li></li>
</ul>
<!-- -->
<ul>
<li>tidypivot</li>
<li>ggcirclepack</li>
</ul></li>
</ul>
<!-- Shiny linkage... -->
<!--  - [codequoteforshiny] When you just want to talk about and manipulate the contents of a plot and not dig into the weeds of how to get there, shiny apps are great!  But if you are writing tools to make ggplot2 interfaces that make the code a closer match with how we think about the plot "getting the picture out of our heads", than you'll probably also want to quote the code!  Looking at the code shouldn't feel too "in the weeds" because of the grammar of graphic's conceptual mapping -- and your attention to conceptual mapping! -->
</section>
</section>
</section>
<section id="section" class="level1">
<h1></h1>
<section id="more-resources" class="level2">
<h2 class="anchored" data-anchor-id="more-resources">More resources</h2>
<p>Any ‘everyday’ ggplot2 extender should also be aware of other invaluable learning resources (compiled by Teun Van Der Brand):</p>
<ul>
<li><p>The <a href="https://ggplot2.tidyverse.org/articles/extending-ggplot2.html">extending ggplot2</a> vignette</p></li>
<li><p>The extending ggplot2 chapters of the <a href="https://ggplot2-book.org/">ggplot2 book</a>:</p>
<ul>
<li>Chapter 19: <a href="https://ggplot2-book.org/programming.html">Programming with ggplot2</a></li>
<li>Chapter 20: <a href="https://ggplot2-book.org/internals.html">ggplot2 internals</a></li>
<li>Chapter 21: <a href="https://ggplot2-book.org/extensions.html">Writing ggplot2 extensions</a></li>
<li>Chapter 22: <a href="https://ggplot2-book.org/spring1.html">Case Study: Springs</a></li>
</ul></li>
<li><p>The <a href="https://stackoverflow.com/questions/tagged/ggproto">ggproto</a> tag on StackOverflow</p></li>
<li><p><a href="https://www.rstudio.com/resources/rstudioconf-2020/extending-your-ability-to-extend-ggplot2/">Extending your ability to extend ggplot2</a> by Thomas Lin Pederson at rstudio::conf 2020</p></li>
<li><p><a href="https://www.rstudio.com/resources/rstudioconf-2020/best-practices-for-programming-with-ggplot2/">Cracking open ggplot internals with {ggtrace}</a> by June Choe at rstudio::conf 2022</p></li>
<li><p><a href="https://www.rstudio.com/resources/rstudioconf-2020/best-practices-for-programming-with-ggplot2/">Best practises for programming with ggplot2</a> by Dewey Dunnington at rstudio::conf 2020</p></li>
</ul>
</section>
</section>
<section id="g.p." class="level1">
<h1>g.p.</h1>
<section id="contributors" class="level2">
<h2 class="anchored" data-anchor-id="contributors">Contributors</h2>
<p>Especially notably in willingness to have conversations about how to make Stat extension more accessible is June Choe; he also has been very open to technical discussion and has played an especially large role in my fluency in using delayed aesthetic evaluation. Teun van den Brand has also been helpful and open to discussion about about technical aspects of particular extension questions.</p>
<p>I’m indebted to the <a href="https://github.com/teunbrand/ggplot-extension-club/blob/main/README.md">ggplot2 extenders meet-up</a> presenters and participants, that have provided a wealth of insight about extension experiences.</p>
<p>In the future anticipate Denver R-Ladies to be a resource for candid, person-to-person feedback. We recently <a href="https://www.meetup.com/rladies-denver/events/299879858/">relaunched</a> the group and I anticipate interest in the topic of ggplot2 extension, and might help host proposed workshops that are part of this proposal.</p>
<p><a href="https://www.andrewheiss.com/">Andrew Heiss</a> has promised to help with a workshop aimed at packaging new ggplot2 extension functionality which is part of this proposal. Other expert package builders (especially in ggplot2 extension) will be recruited.</p>
</section>
<section id="consulted" class="level2">
<h2 class="anchored" data-anchor-id="consulted">Consulted</h2>
<p>I’m grateful to the ASA Colorado-Wyoming Chapter membership for helpful feedback at the October 2023 meeting, after giving the talk: <a href="https://bit.ly/ggextend-cowy">Supporting a new wave of ggplot2 extenders: New points of entry for ggplot2 super-users</a>.</p>
<p>I’ve also grateful to colleagues at West Point Math Department for their feedback on my talk about creating and using new Stats objects: <a href="https://evamaerey.github.io/mytidytuesday/2022-05-09-statistical-geometries/statistical_geometries.html#1">‘Unlocking ggplot2 as a computational engine by extending ggplot2 statistical geometries’</a></p>
<p>Furthermore, I’ve gained feedback from participants evaluating a new tutorial to Stat extension, <a href="https://github.com/EvaMaeRey/easy-geom-recipes">easy geom (Stat) recipes</a>. A survey and focus group was used to hear their reactions. In brief, I found that the recruited ggplot2 super users (regular users with several years of experience), either hadn’t tried to enter the Stat extension space, or felt it was quite challenging. But there was a high success rates for new Stat creation using the new tutorial’s recipes model. <a href="https://evamaerey.github.io/easy-geom-recipes/easy_geom_recipes_compute_group.html">Participant characteristics and tutorial evaluation can be found here</a>. West Point Cadet Morgan Brown assisted in writing the tutorial.</p>
</section>
</section>
<section id="proposal" class="level1">
<h1>proposal</h1>
<p>ggplot2 is notable among R package, sometimes even sighted as a key reason for using the R language more broadly. Its elegance and flexibility, and track-record of being well-maintained makes it a attractive tool for analysts, journalists, educators and the like.</p>
<p>ggplot2 lets users ‘speak their plots into existence’. Users identify requisite, orthogonal plot elements, name those elements and ggplot2 produces the described plot. The composition-based nature of ggplot2 is key to its usability and in turn its popularity.</p>
<p>However, sorely under-utilized are ggplot2 extension mechanisms — and in particular, the creation and use of new Stats. I believe providing education for this mechanism that could take productivity and statistical storytelling with ggplot2 to new heights.</p>
<p>Base ggplot2, of course, makes a lot of Stats available to users. Any time we use <code>geom_histogram</code>, <code>geom_boxpot</code>, <code>geom_smooth</code>, etc, mercifully much computation is happens under the hood for users. Compute is defined in ggproto objects like <code>StatBin</code>, <code>StatBoxplot</code>, <code>StatSmooth</code> which are used in these functions and computation is done automatically.</p>
<p>When users create new Stats via extension, they access ggplot2’s <em>general</em> capability as a computation engine. These users realize that off-loading a computational task to a ggplot2 extension function will save their future-selves or others from doing painstaking computational tasks as a prep step. Having designated Stats means that computation is enabled at the point-of-use: <em>within</em> the plot pipeline via a descriptive function (e.g.&nbsp;geom_point_means() could be defined to plot a point at the means of x and y), instead of requiring computation before starting to plot (and in this case the creation of a derivitive dataset). And that <em>scope</em> of the Stat computation can be modified blazingly fast, via the addition of a group aesthetic or faceting declaration.</p>
<blockquote class="blockquote">
<p>It may seem surprising, but creating new stats is one of the most useful ways to extend the capabilities of ggplot2. – ggplot2: Elegant Graphics for Data Analysis</p>
</blockquote>
<p>Unfortunately, relatively few ggplot2 users have managed to harness the power of this very useful mechanism. The reason for this is likely that dedicated educational material is quite limited. The topic has been covered by extension mechanism authors in works like <a href="https://cran.r-project.org/web/packages/ggplot2/vignettes/extending-ggplot2.html">the ggplot2 extension vignette</a> and in <a href="https://ggplot2-book.org/extensions">ggplot2: Elegant Graphics for Data Analysis, 3rd Edition</a>, but because they are a small part of a much larger topic. In helpful and notable <a href="https://www.youtube.com/watch?reload=9&amp;v=uj7A3i2fi54">extend your ability to extend ggplot2</a> talk by Thomas Lin Pederson, it’s time that doesn’t allow for multiple examples which could help users to start recognizing and differentiating patterns for new Stat creation. I believe that more focused, sustained attention is required of educational materials that want to help ggplot2 users get into Stat creation.</p>
<!-- and because there might be misconception about what is required to enter this space of creating and using new Stats -->
<p>Of particular concern is that barriers to entry and a lack of education is preventing people that could be be particularly prolific and efficacious from making contributions in ggplot2 extension. People with heavy teaching or analytic reporting loads, for example, might not think they have the time-resources to dedicate to figuring out Stat extension since educational materials have been relatively sparse. But extension by such people could be game-changing for their own teaching or analytic work – and could have further impacts should they share more broadly.</p>
<p>Educator, XXX, who recently attended the ggplot2 extenders meet-up and who is XXXX specializing in data visualization commented over email about her work with that uses ggplot2. Quoting her with permission:</p>
<blockquote class="blockquote">
<p>““.</p>
</blockquote>
<p>She further this general prevalence of this inelegance:</p>
<blockquote class="blockquote">
<p>“”</p>
</blockquote>
<p>This comment speaks to the need for greater education in ggplot2 extension mechanisms.</p>
<p>I have fleshed out a plan for doing this and preliminary work on this with emphasis on Stats creation. After hearing XXX reflections, I decided she might be interested in this new work. Her response, used with permission, is encouraging.</p>
<blockquote class="blockquote">
<p>’’</p>
</blockquote>
<p>Further development of these resources and broad dissemination is the goal of this proposal. By supporting this proposal, I think the XXX grant will help ggplot2 and in turn R shine even brighter!</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://www.cynthiahqy.com/posts/ggplot-helper-design/" class="uri">https://www.cynthiahqy.com/posts/ggplot-helper-design/</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://bit.ly/ggextend-cowy">support a new wave of ggplot2 extenders</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2023, Gina Reynolds</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/EvaMaeRey/everyday_ggplot2_extension/edit/main/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/EvaMaeRey/everyday_ggplot2_extension/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Built with <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>